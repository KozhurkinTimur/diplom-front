{"ast":null,"code":"import React,{useState}from'react';import{CreateUser}from'../api/apiUser';import{useNavigate}from'react-router-dom';import store from'../store';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Auth=()=>{const navigate=useNavigate();const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const createUser=()=>{debugger;if(document.getElementById('email')!==null){return;}const data={email:email,password:password,role:store.getIsAdmin};console.log(data);const resp=CreateUser(data);if(resp==null){alert(\"Что-то неправильно\");return;}if(!store.getIsAuth){store.setIsAuth(true);}if(resp.Role!==store.getIsAdmin){store.setIsAdmin(resp.Role);}navigate('/courses');};const handleChangeMail=e=>{setEmail(e.target.value);};const handleChangePass=e=>{setPassword(e.target.value);};return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:createUser,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:handleChangeMail,placeholder:\"Email\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:handleChangePass,placeholder:\"Password\",required:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"register-link\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don`t have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Register\"})]})})]})});};export default Auth;","map":{"version":3,"names":["React","useState","CreateUser","useNavigate","store","jsx","_jsx","jsxs","_jsxs","Auth","navigate","email","setEmail","password","setPassword","createUser","document","getElementById","data","role","getIsAdmin","console","log","resp","alert","getIsAuth","setIsAuth","Role","setIsAdmin","handleChangeMail","e","target","value","handleChangePass","className","children","action","onSubmit","type","onChange","placeholder","required","href"],"sources":["/Users/timurkozurkin/Documents/Go/diplom-front/src/pages/auth.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { CreateUser } from '../api/apiUser';\nimport { useNavigate } from 'react-router-dom';\nimport store from '../store';\n\nconst Auth = () => {\n    const navigate = useNavigate()\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n\n\n    const createUser = () => {\n\n        debugger\n\n        if (document.getElementById('email') !== null) {\n            return\n        }\n\n        const data = {\n            email: email,\n            password: password,\n            role: store.getIsAdmin,\n        }   \n\n        console.log(data)\n            \n        const resp = CreateUser(data)\n\n        if (resp == null) {\n            alert(\"Что-то неправильно\")            \n            return\n        }\n\n        if (!store.getIsAuth) {\n            store.setIsAuth(true)\n        }\n\n        if (resp.Role !== store.getIsAdmin) {\n            store.setIsAdmin(resp.Role)\n        }\n\n        navigate('/courses')\n    }\n\n    const handleChangeMail = (e) => {\n        setEmail(e.target.value);\n    };\n\n    const handleChangePass = (e) => {\n        setPassword(e.target.value);\n    };\n\n    return (\n        <div className='wrapper'>\n            <form action='' onSubmit={createUser}>\n                <h1>Login</h1>\n                <div className='input-box'>\n                    <input type='email' value={email} onChange={handleChangeMail} placeholder='Email' required/>\n                </div>\n                \n                <div className='input-box'>\n                    <input type='password' value={password} onChange={handleChangePass} placeholder='Password' required/>\n                </div>\n\n                <button className='btn'>Login</button>\n\n                <div className='register-link'>\n                    <p>Don`t have an account? <a href='#'>Register</a></p>\n                </div>\n            </form>\n\n        </div>\n    )\n}\n\nexport default Auth"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}